[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/nginx.log
stderr_logfile=/var/log/supervisor/nginx_error.log

[program:parts_api]
command=python3 /app/scripts/start_parts_api.py
directory=/app
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/parts_api.log
stderr_logfile=/var/log/supervisor/parts_api_error.log
environment=PYTHONUNBUFFERED=1

[program:form_api]
command=python3 /app/scripts/start_form_api.py
directory=/app
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/form_api.log
stderr_logfile=/var/log/supervisor/form_api_error.log
environment=PYTHONUNBUFFERED=1

[program:web_server]
command=python3 /app/scripts/start_web_server.py
directory=/app
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/web_server.log
stderr_logfile=/var/log/supervisor/web_server_error.log
environment=PYTHONUNBUFFERED=1

[program:polling_service]
command=python3 /app/scripts/start_polling_service.py
directory=/app
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/polling_service.log
stderr_logfile=/var/log/supervisor/polling_service_error.log
environment=PYTHONUNBUFFERED=1

[program:scheduled_sync]
command=python3 /app/scripts/start_scheduled_sync.py
directory=/app
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/scheduled_sync.log
stderr_logfile=/var/log/supervisor/scheduled_sync_error.log
environment=PYTHONUNBUFFERED=1

[program:quotation_generator]
command=npm run dev -- --host 0.0.0.0 --port 5173
directory=/app/cbs_pdf_generator
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/quotation_generator.log
stderr_logfile=/var/log/supervisor/quotation_generator_error.log
environment=HOST=0.0.0.0,PORT=5173
